{% extends "base.html" %}

{% block content %}
<div class="container" style="max-width: 540px">
  <h2 class="text-center">Handle</h2>

  <!-- Store selection using standard form submission -->
  <form method="GET" action="{{ url_for('category_order') }}">
    <select name="store" id="store" class="form-select mb-1" onchange="this.form.submit()">
      {% for store in stores %}
      <option value="{{ store.name }}" {% if store.name==selected_store.name %}selected{% endif %}>{{ store.name }}
      </option>
      {% endfor %}
    </select>
  </form>

  <!-- categories-->
  <ul class="list-group" id="category-list">
    {% for association in associations|sort(attribute="order_index")%}
    <li class="list-group-item d-flex">
      {{ association.category.name }}
    </li>
    {% endfor %}
  </ul>

</div>

<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script>
  // Initialize Sortable on the category list element
  var categoryList = document.getElementById('category-list');
  var sortable = Sortable.create(categoryList, {
    animation: 150,
  })
</script>


{% endblock content %}